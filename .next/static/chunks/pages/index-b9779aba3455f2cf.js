(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6325)}])},6325:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>D});var r=t(4848),l=t(6540);function s(){let[e,a]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]),(0,r.jsx)("button",{className:"bg-green-500 text-white p-2 rounded-lg",onClick:()=>{a(!e)},children:"Toggle Theme"})}function d(){return(0,r.jsxs)("nav",{className:"bg-white text-dark dark:bg-gray-900 dark:text-light p-4 shadow-md flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-green-400",children:"Sales Insights Portal"}),(0,r.jsx)(s,{})]})}t(6382);var n=t(2550);function o(e){let{data:a,selectedRegion:t,setSelectedRegion:l,startDate:s,setStartDate:d,endDate:o,setEndDate:i,minDate:c,maxDate:u}=e;if(!a)return(0,r.jsx)("div",{children:"No data available"});let g=[...new Set(a.map(e=>e.Country))];return(0,r.jsxs)("div",{className:"mb-4 flex space-x-4 items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mr-2",children:"Filter by Region:"}),(0,r.jsxs)("select",{className:"border p-2 bg-white text-secondary dark:bg-dark rounded-lg",onChange:e=>l(e.target.value),value:t,children:[(0,r.jsx)("option",{value:"All",children:"All"}),g.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mr-2",children:"Filter by Date Range:"}),(0,r.jsx)(n.Ay,{selected:s,onChange:e=>d(e),selectsStart:!0,startDate:s,endDate:o,minDate:c,maxDate:u,className:"border p-2 bg-white text-secondary dark:bg-dark rounded-lg",placeholderText:"Start Date"}),(0,r.jsx)("span",{className:"mx-2  text-secondary ",children:"to"}),(0,r.jsx)(n.Ay,{selected:o,onChange:e=>i(e),selectsEnd:!0,startDate:s,endDate:o,minDate:s||c,maxDate:u,className:"border p-2 bg-white text-secondary dark:bg-dark rounded-lg",placeholderText:"End Date"})]})]})}t(866);var i=t(4731);function c(e){let{data:a}=e;if(!a||0===a.length)return(0,r.jsx)("div",{children:"No data available"});console.log("Sales data:",a);let t=a.reduce((e,a)=>{var t;let r=a["Month Name"],l=null===(t=a.Sales)||void 0===t?void 0:t.replace(/[$,]/g,"");return l&&(e[r]=(e[r]||0)+parseFloat(l)),e},{});console.log("Sales by Month:",t);let l={labels:Object.keys(t),datasets:[{label:"Sales Over Time",data:Object.values(t),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:2}]};return console.log("Chart Data:",l),(0,r.jsx)("div",{className:"col-span-2 row-span-2 col-start-1 row-start-2 bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:(0,r.jsx)(i.N1,{data:l})})}var u=t(6118);function g(e){let{data:a}=e;if(!a||0===a.length)return(0,r.jsx)("div",{children:"No data available"});let t=Object.entries(a.reduce((e,a)=>{var t;let r=a.Product,l=null===(t=a.Sales)||void 0===t?void 0:t.replace(/[$,]/g,"");return l&&(e[r]=(e[r]||0)+parseFloat(l)),e},{})).sort((e,a)=>a[1]-e[1]).slice(0,5),l={labels:t.map(e=>{let[a]=e;return a}),datasets:[{label:"Top Products by Revenue",data:t.map(e=>{let[a,t]=e;return t}),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2}]};return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:(0,r.jsx)(i.yP,{data:l})})}function m(e){let{data:a}=e,t=a.reduce((e,a)=>{var t;let r=a.Country,l=null===(t=a.Sales)||void 0===t?void 0:t.replace(/[$,]/g,"");return l&&(e[r]=(e[r]||0)+parseFloat(l)),e},{}),l={labels:Object.keys(t),datasets:[{label:"Total Sales by Region",data:Object.values(t),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]};return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:(0,r.jsx)(i.yP,{data:l})})}function x(e){let{data:a}=e,t=a.reduce((e,a)=>{var t;let r=a.Product,l=null===(t=a.Sales)||void 0===t?void 0:t.replace(/[$,]/g,"");return l&&(e[r]=(e[r]||0)+parseFloat(l)),e},{}),l={labels:Object.keys(t),datasets:[{label:"Total Sales by Product",data:Object.values(t),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0"],borderColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0"],borderWidth:1}]};return(0,r.jsx)("div",{className:"row-span-2 bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:(0,r.jsx)(i.Fq,{data:l})})}function b(e){let{data:a}=e,t=a.reduce((e,a)=>{var t;let r=a["Month Name"],l=null===(t=a["Units Sold"])||void 0===t?void 0:t.replace(/[$,]/g,"");return l&&(e[r]=(e[r]||0)+parseFloat(l)),e},{}),l={labels:Object.keys(t),datasets:[{label:"Units Sold Over Time",data:Object.values(t),backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]};return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:(0,r.jsx)(i.N1,{data:l})})}function h(e){let{data:a}=e,t=a.map(e=>{var a,t;let r=null===(a=e.Sales)||void 0===a?void 0:a.replace(/[$,]/g,""),l=null===(t=e.Profit)||void 0===t?void 0:t.replace(/[$,]/g,"");return r&&l?{x:parseFloat(r),y:parseFloat(l)}:null}).filter(Boolean);return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:(0,r.jsx)(i.Xl,{data:{datasets:[{label:"Sales vs Profit",data:t,backgroundColor:"rgba(75, 192, 192, 1)"}]}})})}function p(e){let{data:a}=e,t=a.map(e=>{var a,t;let r=null===(a=e.Sales)||void 0===a?void 0:a.replace(/[$,]/g,""),l=null===(t=e.COGS)||void 0===t?void 0:t.replace(/[$,]/g,"");return r&&l?{x:parseFloat(r),y:parseFloat(l)}:null}).filter(Boolean);return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:(0,r.jsx)(i.Xl,{data:{datasets:[{label:"COGS vs Sales",data:t,backgroundColor:"rgba(153, 102, 255, 1)"}]}})})}u.t1.register(...u.$L),u.t1.register(u.E8,u.PP,u.kc,u.m_,u.s$);let v=function(e){let{data:a}=e;console.log("ProfitByProduct Data:",a);let t=a.reduce((e,a)=>{var t,r;let l=null===(t=a.Product)||void 0===t?void 0:t.trim(),s=null===(r=a.Profit)||void 0===r?void 0:r.replace(/[$,]/g,"");return l&&s&&!isNaN(parseFloat(s))&&(e[l]=(e[l]||0)+parseFloat(s)),e},{});if(console.log("Processed Profit Data:",t),0===Object.keys(t).length)return(0,r.jsx)("div",{children:"No data available for Profit by Product"});let l={labels:Object.keys(t),datasets:[{label:"Profit by Product",data:Object.values(t),backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]};return(0,r.jsx)("div",{className:"col-start-3 row-start-3 bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:(0,r.jsx)(i.yP,{data:l})})};var j=t(1598),f=t(8187);function N(e){let{title:a,data:t,valueKey:l,currency:s=!0}=e,d=t.reduce((e,a)=>{var t;let r=a["Month Name"],s=parseFloat((null===(t=a[l])||void 0===t?void 0:t.replace(/[$,]/g,""))||"0");return e[r]=(e[r]||0)+s,e},{}),n=Object.keys(d).sort((e,a)=>new Date("1 ".concat(e," 2020")).getMonth()-new Date("1 ".concat(a," 2020")).getMonth()),o=n[n.length-1],i=n[n.length-2],c=d[o]||0,u=d[i]||0,g=0===u?0:(c-u)/u*100,m=t.map(e=>new Date(e.Date)),x=new Date(Math.min(...m.map(e=>e.getTime()))),b=new Date(Math.max(...m.map(e=>e.getTime()))),h=e=>e.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"});return(0,r.jsxs)("div",{className:"border-dark p-4 rounded-lg shadow-sm bg-white text-dark dark:bg-gray-900 dark:text-light mb-2",children:[(0,r.jsx)("h3",{className:"text-secondary text-sm",children:a}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:s?"$".concat(c.toFixed(2)):c.toFixed(2)}),(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[g>=0?(0,r.jsx)(j.A,{className:"text-green-500 w-4 h-4"}):(0,r.jsx)(f.A,{className:"text-red-500 w-4 h-4"}),(0,r.jsxs)("span",{className:"ml-1 text-sm ".concat(g>=0?"text-green-500":"text-red-500"),children:[g.toFixed(2),"% Compared to last month"]})]}),(0,r.jsxs)("p",{className:"text-xs text-secondary mt-2",children:["From ",h(x)," - ",h(b)]})]})}function y(e){let{data:a}=e;return(0,r.jsx)(N,{title:"Total Income",data:a,valueKey:"Sales"})}function w(e){let{data:a}=e;return(0,r.jsx)(N,{title:"Total Profit",data:a,valueKey:"Profit"})}let k=function(e){let{data:a}=e,t=Object.entries(a.reduce((e,a)=>{var t,r;let l=a.Product,s=parseFloat((null===(t=a.Sales)||void 0===t?void 0:t.replace(/[$,]/g,"").trim())||"0"),d=parseInt((null===(r=a["Units Sold"])||void 0===r?void 0:r.replace(/[$,]/g,"").trim())||"0",10),n=parseFloat(a.Profit?a.Profit.toString().trim().replace(/[$,]/g,""):"0");return Number.isNaN(n)&&(n=0),e[l]||(e[l]={revenue:0,sales:0,profit:0}),e[l].revenue+=s,e[l].sales+=d,e[l].profit+=n,e},{})).sort((e,a)=>a[1].revenue-e[1].revenue).slice(0,5),l=a.map(e=>new Date(e.Date)),s=new Date(Math.min(...l.map(e=>e.getTime()))),d=new Date(Math.max(...l.map(e=>e.getTime()))),n=e=>e.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"});return(0,r.jsxs)("div",{className:"col-span-2 row-start-4 bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm",children:[(0,r.jsx)("h3",{className:"text-gray-500 text-sm",children:"Top Products Performance"}),(0,r.jsx)("div",{className:"mt-3",children:t.map((e,a)=>{let[t,l]=e;return(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b last:border-none ".concat(0===a?"text-green-500 font-bold":"text-gray-300"),children:[(0,r.jsx)("span",{className:"text-sm",children:t}),(0,r.jsxs)("div",{className:"text-sm flex space-x-4",children:[(0,r.jsxs)("span",{children:["\uD83D\uDCB0 $",l.revenue.toFixed(2)]}),(0,r.jsxs)("span",{children:["\uD83D\uDCE6 ",l.sales," Sales"]}),(0,r.jsxs)("span",{children:["\uD83D\uDCC8 $",l.profit.toFixed(2)," Profit"]})]})]},t)})}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["From ",n(s)," - ",n(d)]})]})};function D(){let[e,a]=(0,l.useState)([]),[t,s]=(0,l.useState)("All"),[n,i]=(0,l.useState)(null),[u,j]=(0,l.useState)(null),[f,N]=(0,l.useState)(null),[D,S]=(0,l.useState)(null);(0,l.useEffect)(()=>{fetch("/api/financial-data").then(e=>e.json()).then(e=>{if(a(e),e.length>0){let a=e.map(e=>C(e.Date));N(new Date(Math.min(...a.map(e=>e.getTime())))),S(new Date(Math.max(...a.map(e=>e.getTime()))))}})},[]);let C=e=>{let[a,t,r]=e.split("/").map(Number);return new Date(r,a-1,t)},P=e.filter(e=>{let a=C(e.Date),r="All"===t||e.Country===t,l=(!n||a>=n)&&(!u||a<=u);return r&&l});return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 text-dark dark:bg-dark dark:text-light",children:[(0,r.jsx)(d,{}),(0,r.jsxs)("div",{className:"max-w-8x1 mx-auto p-5",children:[(0,r.jsx)(o,{data:e,selectedRegion:t,setSelectedRegion:s,startDate:n,setStartDate:i,endDate:u,setEndDate:j,minDate:f,maxDate:D}),(0,r.jsxs)("div",{className:"grid grid-cols-5 grid-rows-5 gap-4",children:[(0,r.jsx)(y,{data:P}),(0,r.jsx)(w,{data:P}),(0,r.jsx)(x,{data:P}),(0,r.jsx)(v,{data:P}),(0,r.jsx)(c,{data:P.map(e=>({...e,Sales:e.Sales,MonthName:e["Month Name"]})),selectedRegion:t}),(0,r.jsx)(k,{data:P})]}),(0,r.jsx)(g,{data:P.map(e=>({...e,Product:e.Product,Sales:e.Sales}))}),(0,r.jsx)(m,{data:P}),(0,r.jsx)(b,{data:P}),(0,r.jsx)(h,{data:P}),(0,r.jsx)(p,{data:P})]})]})}},6382:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[201,348,630,405,636,593,792],()=>a(2022)),_N_E=e.O()}]);